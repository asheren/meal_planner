<%- model_class = Recipe -%>

<div class="page-header d-flex justify-content-between align-items-center flex-wrap gap-3">
  <div>
    <h1>Unscheduled Recipes</h1>
    <p class="subtitle">Recipes waiting to be planned</p>
  </div>
  <%= link_to "Add New Recipe", new_recipe_path, class: 'btn btn-primary' %>
</div>

<% if @recipes_unscheduled.any? %>
  <div class="row row-cols-1 row-cols-md-2 row-cols-lg-3 g-4">
    <% @recipes_unscheduled.each do |recipe| %>
      <div class="col">
        <div class="recipe-card">
          <div class="card-body d-flex flex-column">
            <h3 class="recipe-name">
              <%= link_to recipe.name, recipe_path(recipe), class: "text-decoration-none text-dark" %>
            </h3>
            <% if recipe.recipe_description.present? %>
              <p class="recipe-description"><%= truncate(recipe.recipe_description, length: 80) %></p>
            <% end %>
            <% if recipe.recipe_link.present? %>
              <p class="mb-2">
                <%= link_to recipe.recipe_link.truncate(30), ensure_protocol(recipe.recipe_link), target: "_blank", class: "recipe-link" %>
              </p>
            <% end %>
            <div class="mb-3">
              <% recipe.tag_list.each do |tag| %>
                <%= link_to tag, tag_path(tag, unscheduled_only: true), class: "tag-badge me-1" %>
              <% end %>
            </div>
            <div class="action-buttons mt-auto">
              <%= link_to "Edit", edit_recipe_path(recipe), class: 'btn btn-primary btn-sm' %>
              <%= link_to "Schedule", edit_recipe_path(recipe), class: 'btn btn-success btn-sm' %>
              <%= link_to "Delete", recipe_path(recipe), method: :delete, data: { confirm: 'Are you sure?' }, class: 'btn btn-danger btn-sm' %>
            </div>
          </div>
        </div>
      </div>
    <% end %>
  </div>
<% else %>
  <div class="empty-state card-custom">
    <h3>No unscheduled recipes</h3>
    <p>All your recipes are scheduled, or you haven't added any yet.</p>
    <%= link_to "Add a Recipe", new_recipe_path, class: 'btn btn-primary' %>
  </div>
<% end %>
